# {{ ansible_managed }}


systemLog:
  logAppend: {{ mongodb_conf_logappend|to_nice_json|bool|lower }}
  path: {{ mongodb_conf_logpath }}
  destination: {{ mongodb_conf_log_destination }} 

net:
  port: {{ mongodb_conf_port|int }}
  bindIp: {{ mongodb_conf_bind_ip | to_json }}
  maxIncomingConnections: {{ mongodb_conf_maxConns|int }}
  ipv6: {{ mongodb_conf_ipv6|to_nice_json|bool|lower }}
  http: 
    enabled: {{ mongodb_conf_httpinterface|to_nice_json|bool|lower }}

security:
  authorization: {{ mongodb_conf_auth|to_nice_json|string }}
  javascriptEnabled: {{ mongodb_conf_noscripting|to_nice_json|bool|lower }}

storage:
  dbPath: {{ mongodb_conf_dbpath }}
  journal:  
    enabled: {{ mongodb_conf_journal|to_nice_json|bool|lower }}

processManagement:
{% if ( mongodb_conf_syslog or mongodb_conf_logpath ) and mongodb_conf_fork %}
  fork: true
{% else %}
  fork: false
{% endif %}

{% if mongodb_conf_replSet %}
# Replica set options:
replication:
  replSetName: {{ mongodb_conf_replSet }}
{% endif %}

